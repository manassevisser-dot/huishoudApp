tree src \  -a \  -I "node_modules|__tests__|__mocks__|dist|build|coverage" \  --dirsfirst
src
â”œâ”€â”€ adapters
â”‚Â Â  â”œâ”€â”€ audit
â”‚Â Â  â”‚Â Â  â””â”€â”€ AuditLoggerAdapter.ts
â”‚Â Â  â”œâ”€â”€ csv
â”‚Â Â  â”‚Â Â  â””â”€â”€ csvService.ts
â”‚Â Â  â”œâ”€â”€ storage
â”‚Â Â  â”‚Â Â  â””â”€â”€ storage.ts
â”‚Â Â  â”œâ”€â”€ transaction
â”‚Â Â  â”‚Â Â  â””â”€â”€ stateful.ts
â”‚Â Â  â””â”€â”€ undo
â”‚Â Â      â”œâ”€â”€ .reconstruct_placeholder
â”‚Â Â      â””â”€â”€ stateful.ts
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ context
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __test__
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ formReducer.test.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ FormContext.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ formReducer.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ThemeContext.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ WizardContext.tsx
â”‚Â Â  â”œâ”€â”€ hooks
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ useAppOrchestration.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ useTransactionHistory.ts
â”‚Â Â  â””â”€â”€ orchestrators
â”‚Â Â      â”œâ”€â”€ export.ts
â”‚Â Â      â”œâ”€â”€ .reconstruct_placeholder
â”‚Â Â      â””â”€â”€ transactionOrchestrator.ts
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ features.ts
â”‚Â Â  â””â”€â”€ WizStrings.ts
â”œâ”€â”€ containers
â”‚Â Â  â””â”€â”€ AdultsCounter.tsx
â”œâ”€â”€ core
â”‚Â Â  â”œâ”€â”€ logic
â”‚Â Â  â”œâ”€â”€ state
â”‚Â Â  â”‚Â Â  â””â”€â”€ slices
â”‚Â Â  â””â”€â”€ types
â”‚Â Â      â”œâ”€â”€ core.ts
â”‚Â Â      â”œâ”€â”€ expenses.ts
â”‚Â Â      â”œâ”€â”€ extendedFormState.ts
â”‚Â Â      â”œâ”€â”€ fields.ts
â”‚Â Â      â”œâ”€â”€ finance.ts
â”‚Â Â      â”œâ”€â”€ form.ts
â”‚Â Â      â”œâ”€â”€ income.ts
â”‚Â Â      â”œâ”€â”€ transaction.ts
â”‚Â Â      â””â”€â”€ wizard.ts
â”œâ”€â”€ domain
â”‚Â Â  â”œâ”€â”€ constants
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ datakeys.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ labels.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ registry.ts
â”‚Â Â  â”œâ”€â”€ helpers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ frequency.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ numbers.ts
â”‚Â Â  â”œâ”€â”€ rules
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ evaluateDomainRules.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ financeRules.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ householdRules.ts
â”‚Â Â  â”œâ”€â”€ types
â”‚Â Â  â”œâ”€â”€ validation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fieldValidator.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ runtimeParser.ts
â”‚Â Â  â”œâ”€â”€ household.ts
â”‚Â Â  â””â”€â”€ types.ts
â”œâ”€â”€ kernel
â”‚Â Â  â””â”€â”€ finance
â”‚Â Â      â”œâ”€â”€ index.ts
â”‚Â Â      â”œâ”€â”€ mappers.ts
â”‚Â Â      â””â”€â”€ .reconstruct_placeholder
â”œâ”€â”€ navigation
â”‚Â Â  â””â”€â”€ Navigator.tsx
â”œâ”€â”€ services
â”‚Â Â  â”œâ”€â”€ dataOrchestrator.ts
â”‚Â Â  â”œâ”€â”€ dataProcessor.ts
â”‚Â Â  â”œâ”€â”€ householdAlign.ts
â”‚Â Â  â”œâ”€â”€ migrationService.ts
â”‚Â Â  â”œâ”€â”€ privacyHelpers.ts
â”‚Â Â  â”œâ”€â”€ storageShim.ts
â”‚Â Â  â””â”€â”€ transactionService.ts
â”œâ”€â”€ shared
â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â””â”€â”€ ui
â”‚Â Â  â”œâ”€â”€ types
â”‚Â Â  â””â”€â”€ utils
â”œâ”€â”€ shared-types
â”œâ”€â”€ state
â”‚Â Â  â””â”€â”€ schemas
â”‚Â Â      â””â”€â”€ FormStateSchema.ts
â”œâ”€â”€ test-utils
â”‚Â Â  â”œâ”€â”€ assertions
â”‚Â Â  â”‚Â Â  â””â”€â”€ migrationAssertions.ts
â”‚Â Â  â”œâ”€â”€ factories
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ csvFactory.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ memberFactory.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ stateFactory.ts
â”‚Â Â  â”œâ”€â”€ perf
â”‚Â Â  â”‚Â Â  â””â”€â”€ measure.ts
â”‚Â Â  â”œâ”€â”€ render
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ providers.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ renderers.tsx
â”‚Â Â  â”œâ”€â”€ utils
â”‚Â Â  â”‚Â Â  â””â”€â”€ name.ts
â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â””â”€â”€ jest.setup.tsx
â”œâ”€â”€ ui
â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fields
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ChipButton.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ConditionalField.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DateField.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ FormField.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ InputCounter.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MoneyField.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MoneyInput.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ToggleSwitch.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ FieldRenderer.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ FinancialSummary.tsx
â”‚Â Â  â”œâ”€â”€ navigation
â”‚Â Â  â”‚Â Â  â””â”€â”€ MainNavigator.tsx
â”‚Â Â  â”œâ”€â”€ screens
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CSV
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ CsvUploadScreen.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Daily
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ UndoScreen.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DailyInput
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DailyInputScreen.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Dashboard
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DashboardScreen.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Options
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ OptionsScreen.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Reset
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ResetScreen.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Settings
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ SettingsScreen.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ Wizard
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ pages
â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 1setupHousehold.config.ts
â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 2detailsHousehold.config.ts
â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 3incomeDetails.config.ts
â”‚Â Â  â”‚Â Â      â”‚Â Â  â””â”€â”€ 4fixedExpenses.config.ts
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CriticalErrorScreen.tsx
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ LandingScreen.tsx
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ SplashScreen.tsx
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ WelcomeWizard.tsx
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ WizardController.tsx
â”‚Â Â  â”‚Â Â      â””â”€â”€ WizardPage.tsx
â”‚Â Â  â”œâ”€â”€ selectors
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ financialSelectors.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ householdSelectors.ts
â”‚Â Â  â””â”€â”€ styles
â”‚Â Â      â”œâ”€â”€ modules
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Alerts.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Buttons.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Cards.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Checkboxes.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Chips.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Dashboard.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Forms.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Header.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Helpers.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Layout.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Summary.ts
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Toggles.ts
â”‚Â Â      â”‚Â Â  â””â”€â”€ Typography.ts
â”‚Â Â      â”œâ”€â”€ Colors.ts
â”‚Â Â      â”œâ”€â”€ Tokens.ts
â”‚Â Â      â””â”€â”€ useAppStyles.ts
â”œâ”€â”€ utils
â”‚Â Â  â”œâ”€â”€ audit
â”‚Â Â  â”œâ”€â”€ conditions.ts
â”‚Â Â  â”œâ”€â”€ csvHelper.ts
â”‚Â Â  â”œâ”€â”€ date.ts
â”‚Â Â  â”œâ”€â”€ fieldVisibility.ts
â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â”œâ”€â”€ objects.ts
â”‚Â Â  â”œâ”€â”€ ping.ts
â”‚Â Â  â””â”€â”€ strings.ts
â””â”€â”€ App.tsx

62 directories, 119 files
====
GEWENST:

src/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ validation/
â”‚   â”‚   â”œâ”€â”€ fieldValidator.ts                  # (bestond al als migratie van utils/validation.ts)
â”‚   â”‚   â””â”€â”€ schemas/
â”‚   â”‚       â””â”€â”€ FormStateSchema.ts             # â† src/state/schemas/FormStateSchema.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ core.ts                            # âœ… migreert
â”‚   â”‚   â”œâ”€â”€ form.ts                            # âœ… migreert
â”‚   â”‚   â”œâ”€â”€ fields.ts                          # âœ… migreert
â”‚   â”‚   â”œâ”€â”€ finance.ts                         # âœ… migreert
â”‚   â”‚   â”œâ”€â”€ extendedFormState.ts               # âœ… migreert
â”‚   â”‚   â”œâ”€â”€ expenses.ts                        # âŒ nu opgenomen
â”‚   â”‚   â”œâ”€â”€ income.ts                          # âŒ nu opgenomen
â”‚   â”‚   â”œâ”€â”€ transaction.ts                     # âŒ nu opgenomen
â”‚   â”‚   â””â”€â”€ wizard.ts                          # âŒ nu opgenomen
â”‚   â””â”€â”€ helpers/
â”‚       â”œâ”€â”€ fieldVisibility.ts                 # â† utils/fieldVisibility.ts
â”‚       â”œâ”€â”€ frequency.ts                       # â† utils/frequency.ts
â”‚       â”œâ”€â”€ numbers.ts                         # â† utils/numbers.ts
â”‚       â”œâ”€â”€ objects.ts                         # â† utils/objects.ts
â”‚       â”œâ”€â”€ strings.ts                         # â† utils/strings.ts
â”‚       â””â”€â”€ date.ts                            # â† utils/date.ts
â”‚
â”œâ”€â”€ application/                                # (nieuw) use-cases & orchestration
â”‚   â”œâ”€â”€ orchestrators/
â”‚   â”‚   â””â”€â”€ dataOrchestrator.ts                # â† services/dataOrchestrator.ts (ongewijzigde API)
â”‚   â”œâ”€â”€ processors/
â”‚   â”‚   â””â”€â”€ dataProcessor.ts                   # â† services/dataProcessor.ts
â”‚   â”œâ”€â”€ household/
â”‚   â”‚   â””â”€â”€ householdAlign.ts                  # â† services/householdAlign.ts
â”‚   â”œâ”€â”€ transactions/
â”‚   â”‚   â””â”€â”€ transactionService.ts              # â† services/transactionService.ts
â”‚   â”œâ”€â”€ privacy/
â”‚   â”‚   â””â”€â”€ privacyHelpers.ts                  # â† services/privacyHelpers.ts
â”‚   â”œâ”€â”€ migration/
â”‚   â”‚   â””â”€â”€ migrationService.ts                # â† services/migrationService.ts
â”‚   â””â”€â”€ legacy/                                # compat-laag (optioneel, voor gefaseerde afbouw)
â”‚       â””â”€â”€ selectors/
â”‚           â”œâ”€â”€ financialSelectors.ts          # â† selectors/financialSelectors.ts
â”‚           â””â”€â”€ householdSelectors.ts          # â† selectors/householdSelectors.ts
â”‚
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ adapters/
â”‚   â”‚   â”œâ”€â”€ csv/
â”‚   â”‚   â”‚   â””â”€â”€ csvService.ts                  # âœ… eerder verplaatst
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts                     # âœ… eerder verplaatst
â”‚   â”‚   â”‚   â””â”€â”€ storageShim.ts                 # â† services/storageShim.ts (nu infra/shims)
â”‚   â”‚   â””â”€â”€ audit/
â”‚   â”‚       â”œâ”€â”€ AuditLogger.ts                 # â† utils/AuditLogger.ts
â”‚   â”œâ”€â”€ logging/
â”‚   â”‚   â””â”€â”€ logger.ts                          # â† services/logger.ts
â”‚   â”œâ”€â”€ telemetry/
â”‚   â”‚   â””â”€â”€ ping.ts                            # â† utils/ping.ts
â”‚   â””â”€â”€ shims/
â”‚       â””â”€â”€ storageShim.ts                     # alias naar adapters/storage/storageShim.ts (1 plek)
â”‚
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ Containers/
â”‚   â”‚       â””â”€â”€ AdultsCounter.tsx              # â† containers/AdultsCounter.tsx
â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â””â”€â”€ Navigator.tsx                      # â† src/navigation/Navigator.tsx (geÃ¼nificeerd pad)
â”‚   â””â”€â”€ screens/                               # (plaatsbaken; geen verplaatsing nodig nu)
â”‚
â”œâ”€â”€ kernel/                                    # blijft, expliciet geborgd
â”‚   â””â”€â”€ finance/
â”‚       â”œâ”€â”€ index.ts
â”‚       â””â”€â”€ mappers.ts
â”‚
â”œâ”€â”€ shared/                                    # test utilities + gedeelde test data
â”‚   â””â”€â”€ test-utils/                            # â† src/test-utils/ (indien aanwezig)
â”‚
â”œâ”€â”€ __tests__/                                  # test-infra blijft, expliciet geborgd
â”‚
â””â”€â”€ __mocks__/                                  # mocks vanuit services/__mocks__ hierheen verplaatst
``

=====
tree src \  -a \  -I "node_modules|dist|build" \  | grep -E "(utils|helpers|common|shared|legacy|old|temp|misc|services)"
â”‚Â Â      â”œâ”€â”€ .reconstruct_placeholder
â”‚Â Â          â””â”€â”€ .placeholder
â”‚Â Â      â”œâ”€â”€ .reconstruct_placeholder
â”‚Â Â      â”‚Â Â  â””â”€â”€ .placeholder
â”‚Â Â  â”œâ”€â”€ helpers
â”‚Â Â  â”œâ”€â”€ household.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ householdRules.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ household.test.ts
â”‚Â Â      â”œâ”€â”€ .reconstruct_placeholder
â”‚Â Â          â””â”€â”€ .placeholder
â”œâ”€â”€ services
â”‚Â Â  â”œâ”€â”€ householdAlign.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ householdAlign.test.ts
â”œâ”€â”€ shared
â”‚Â Â  â””â”€â”€ utils
â”œâ”€â”€ shared-types
â”œâ”€â”€ test-utils
â”‚Â Â  â””â”€â”€ utils
â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 1setupHousehold.config.ts
â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 2detailsHousehold.config.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ householdSelectors.ts
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ householdSelectors.test.ts
â”‚Â Â  â”‚Â Â          â””â”€â”€ householdSelectors.test.ts.snap
â””â”€â”€ utils
===
tree src \  -a \  | grep -E "(manager|handler|controller|service|adapter|provider|factory)"
â”œâ”€â”€ adapters
â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ providers.tsx
=====
tree src \  -a \  | grep -E "(shared|state|schema|types)"
â”‚Â Â  â”‚Â Â  â””â”€â”€ stateful.ts
â”‚Â Â      â”œâ”€â”€ stateful.ts
â”‚Â Â  â”œâ”€â”€ state
â”‚Â Â  â””â”€â”€ types
â”‚Â Â  â”œâ”€â”€ types
â”‚Â Â  â”œâ”€â”€ types.ts
â”œâ”€â”€ shared
â”‚Â Â  â”œâ”€â”€ types
â”œâ”€â”€ shared-types
â”œâ”€â”€ state
â”‚Â Â  â””â”€â”€ schemas
â”‚Â Â          â””â”€â”€ schemas.test.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ stateFactory.ts
====
find src -type f -name "*.ts*" -exec wc -l {} + | awk '$1 > 100 {print $2, "â†’", $1, "lines"}'
src/services/__tests__/migration.members.test.ts â†’ 222 lines
src/services/__tests__/privacyHelpers.test.ts â†’ 126 lines
src/services/__tests__/idempotency.test.ts â†’ 329 lines
src/services/privacyHelpers.ts â†’ 132 lines
src/services/dataOrchestrator.ts â†’ 122 lines
src/ui/components/__tests__/MoneyInput.test.tsx â†’ 375 lines
src/ui/screens/CSV/CsvUploadScreen.tsx â†’ 148 lines
src/ui/screens/Daily/__tests__/__snapshots__/UndoScreen.test.tsx.snap â†’ 335 lines
src/ui/styles/modules/Forms.ts â†’ 138 lines
src/ui/styles/modules/Buttons.ts â†’ 103 lines
src/utils/__tests__/numbers.test.ts â†’ 118 lines
src/utils/__tests__/date.test.ts â†’ 133 lines
src/utils/__tests__/logger.test.ts â†’ 319 lines
src/utils/__tests__/frequency.test.ts â†’ 103 lines
src/utils/date.ts â†’ 237 lines
src/app/hooks/useTransactionHistory.ts â†’ 137 lines
src/app/hooks/__tests__/useTransactionHistory.test.ts â†’ 151 lines
src/app/hooks/__tests__/useAppOrchestration.test.tsx â†’ 111 lines
total â†’ 9770 lines
======
Perfect! Als we de **testbestanden** eruit halen, blijft het overzicht van **grote, productie- of helper-bestanden (>100 lijnen)** over die extra aandacht nodig hebben bij migratie. Ik heb het overzicht opgeschoond:

---

# ðŸŸ¢ Migratie Review Overzicht â€” â€œRestschuld & Complexe Filesâ€ (tests verwijderd)

## 1ï¸âƒ£ Grote productie-/helper-bestanden (>100 lijnen)

| Bestand                                  | Lijnen | Opmerkingen                                                                          |
| ---------------------------------------- | ------ | ------------------------------------------------------------------------------------ |
| `src/services/privacyHelpers.ts`         | 132    | Service; migratie naar `application/privacy/` nodig                                  |
| `src/services/dataOrchestrator.ts`       | 122    | Service; migratie naar `application/orchestrators/`                                  |
| `src/ui/screens/CSV/CsvUploadScreen.tsx` | 148    | UI screen; check dependencies op services/adapters                                   |
| `src/ui/styles/modules/Forms.ts`         | 138    | UI style module; nu onder `ui/styles/modules/` maar wordt beheerd via `useAppStyles` |
| `src/ui/styles/modules/Buttons.ts`       | 103    | UI style module; idem als Forms.ts                                                   |
| `src/utils/date.ts`                      | 237    | Helper; migratie naar `domain/helpers/date.ts`                                       |
| `src/app/hooks/useTransactionHistory.ts` | 137    | Hook; check afhankelijkheden en contextgebruik                                       |

âœ… **Aantal bestanden:** 7
âœ… **Totaal lijnen:** 1047

---

## 2ï¸âƒ£ Mogelijk dubbel / restschuld bestanden

| Bestand                                | Reden / Commentaar                         | Migratie suggestie                              |
| -------------------------------------- | ------------------------------------------ | ----------------------------------------------- |
| `src/services/` (diverse)              | Ongebruikte services / compat-laag?        | Migreren naar `application/` of legacy/adapter  |
| `src/utils/`                           | Sommige helpers zijn nu `domain/helpers`   | Herplaatsen en referenties aanpassen            |
| `src/state/schemas/FormStateSchema.ts` | Staat nu in `state/`                       | Migratie naar `domain/validation/schemas/`      |
| `src/selectors/`                       | Dubbele functie met legacy orchestrators   | Plaatsen in `application/legacy/selectors/`     |
| `src/ui/styles/modules/*`              | Wordt georchestratet door `useAppStyles`   | Modules kunnen blijven, maar check verwijzingen |
| `src/ui/screens`                       | Grote UI screens (>100 lijnen)             | Review afhankelijkheden op services/adapters    |
| `src/app/hooks`                        | Hooks zijn groot / afhankelijk van context | Check migratie naar nieuwe orchestratie-context |

---

## 3ï¸âƒ£ Structuur en migratiepunten

```
src/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ validation/   # FormStateSchema migreren + andere schemaâ€™s
â”‚   â”œâ”€â”€ types/        # Expenses, Income, Transaction, Wizard nog migreren
â”‚   â””â”€â”€ helpers/      # fieldVisibility, frequency, numbers, objects, strings, date
â”œâ”€â”€ application/       # services migreren (dataOrchestrator, transactionService, privacyHelpers, etc.)
â”œâ”€â”€ infrastructure/    # adapters, logging, telemetry
â”œâ”€â”€ ui/                # screens, components; style modules via useAppStyles
â”œâ”€â”€ kernel/            # finance blijft expliciet
â”œâ”€â”€ shared/            # test-utils
â””â”€â”€ __tests__/          # test infra blijft
```

ðŸ’¡ **Conclusie:**

* Productie-/helper-bestanden >100 lijnen **prioriteit review**.
* Services, utils en selectors bevatten **dubbele functies** of **nog niet gemigreerde logica**.
* UI styles en hooks moeten gecontroleerd worden tegen `useAppStyles` en nieuwe orchestratie-context.
* FormStateSchema en domain types zijn **kritisch** voor SVZ-0 compliance.

---

Als je wilt, kan ik nu meteen **een actielijst per bestand maken**, met migratiepad + risico + review-notities, zodat je **een kant-en-klare checklist** hebt voor deze resterende bestanden.

Wil ik dat doen?




======
Hier is **de beste volgorde** om jouw migratie *daadwerkelijk* en *zonder risico* uit te voeren.  
Dit is **SVZâ€‘0-proof**, sluit perfect aan op jouw gapâ€‘analyse, Ã©n voorkomt refactor-chaos.

Ik ken je hele architectuurpad inmiddels goed â€” dus dit is een **praktisch uitvoerbaar stappenplan** dat je direct kunt toepassen.

***

# ðŸš¦ **Migratie volgorde â€” De Enige Juiste Volgorde (SVZâ€‘0 Compliant)**

Je hebt nu drie hoofdgroepen:

1.  **Kritische kern** (types, schemaâ€™s, helpers)
2.  **Operationele kern** (services â†’ application)
3.  **UI & orchestration** (screens, hooks, styles)

De ideale volgorde is **van binnen â†’ naar buiten**:

1.  **Domain stabiel maken**
2.  **Infrastructure stabiliseren**
3.  **Application ordenen**
4.  **UI opnieuw verankeren op nieuwe lagen**

Hier komt de exacte volgorde.

***

# ðŸ¥‡ **Stap 1 â€” Domain stabiliseren (de fundering)**

> *Niets anders migreren zolang dit niet rond is.*

### 1.1 Migreer alle types

> Types zijn de **TODO â†’ DONE** van je hele architectuur.

Doen:

*   `shared-types/*` â†’ `domain/types/*`
*   Let op: vooral `transaction`, `wizard`, `income`, `expenses` zijn **kritisch**.

Effect:  
ðŸ‘‰ Je hele codebase krijgt consistente lowâ€‘level contracten.

***

### 1.2 Migreer alle schemaâ€™s

*   `state/schemas/FormStateSchema.ts` â†’ `domain/validation/schemas/FormStateSchema.ts`

Effect:
ðŸ‘‰ Alle validatie/mappings gebruiken dezelfde bron.

***

### 1.3 Migreer alle helpers

Je hebt zware helpers:

*   `utils/date.ts` (237 lijnen)
*   numbers/strings/objects/frequency/fieldVisibility

Doen:

*   naar `domain/helpers/*`
*   referenties systematisch updaten

Effect:
ðŸ‘‰ **Businessregels zitten nu gecentraliseerd in een pure, side-effect-free laag.**

***

# ðŸ¥ˆ **Stap 2 â€” Infrastructure ordenen (bruggen & adapters)**

> *Voordat je application-layer services verplaatst, moeten alle adapters valide zijn.*

### 2.1 Logging

*   `services/logger.ts` â†’ `infrastructure/logging/logger.ts`

### 2.2 Audit

*   `AuditLogger.ts` â†’ `infrastructure/adapters/audit/AuditLogger.ts`

### 2.3 Telemetry

*   `utils/ping.ts` â†’ `infrastructure/telemetry/ping.ts`

### 2.4 Storage

*   `storage.ts` is al migratie-compliant
*   `storageShim.ts` moet naar `infrastructure/adapters/storage/storageShim.ts`

Effect:
ðŸ‘‰ **Alle sideâ€‘effect code staat nu veilig onder infrastructure voordat je application-layer gaat reorganiseren.**

***

# ðŸ¥‰ **Stap 3 â€” Application migreren (services â†’ orchestrators)**

> Dit is jouw grootste restschuld Ã©n grootste winst.

### 3.1 Grote services migreren

Migratie naar:

    application/
      orchestrators/
      processors/
      migration/
      privacy/
      household/
      transactions/

De grote jongens:

| Bestand               | Aandacht                   |
| --------------------- | -------------------------- |
| dataOrchestrator.ts   | 122 lijnen, high strategic |
| privacyHelpers.ts     | 132 lijnen, complex        |
| transactionService.ts | high coupling              |
| dataProcessor.ts      | CPU + IO mix               |
| householdAlign.ts     | domain heavy               |
| migrationService.ts   | edge cases                 |

**Dit is het zwaarste blok in de migratie.**

***

### 3.2 Legacy selectors naar compatâ€‘laag

> Mag pas NA domain + infrastructure klaar is.

*   `selectors/*` â†’ `application/legacy/selectors/`

Effect:  
ðŸ‘‰ Je breekt niets, maar voorkomt dat deze rotzooi centraal in app blijft ronddwalen.

***

# ðŸŸ¦ **Stap 4 â€” UI stabiliseren**

> UI mag pas worden aangepakt als domain + infra + application stabiel zijn.

UI bestaat uit drie grote issues:

### 4.1 Grote screens reviewen (CSV upload screen)

*   `CsvUploadScreen.tsx` (148 lijnen)
    *   controleer dependencies op: services (nu application), utils (nu domain/helpers), adapters/infrastructure.

Doel:
ðŸ‘‰ Screen moet alleen praten met **application-layer**, niet direct met services/infra.

***

### 4.2 Hooks migreren

*   `useTransactionHistory.ts` (137 lijnen)

Checklist:

*   Praat deze hook direct met services? â†’ fix naar `application/transactions/**`
*   Gebruikt deze hook state die nu onder domain/validation hoort?

***

### 4.3 UI styles consistent maken

De style modules:

*   `ui/styles/modules/Forms.ts` (138 lijnen)
*   `ui/styles/modules/Buttons.ts` (103 lijnen)

Actie:

*   check afhankelijkheid op `useAppStyles`
*   styles blijven, maar zorg dat:  
    âž¤ ze **geen domeinlogica**, **geen helpers** of **geen services** aanroepen.

***

# ðŸŸ© **Stap 5 â€” Kernel valideren**

> Gebeurt *vlak voor afronding*.

Kernel bestaat:

*   `kernel/finance/index.ts`
*   `kernel/finance/mappers.ts`

Actie:

*   alleen validatie dat nieuwe domain/helpers ze niet breekt

Geen migratie nodig.

***

# ðŸŸ£ **Stap 6 â€” Cleanup & Shims verwijderen**

> Dit is je â€œSVZâ€‘1 polishâ€.

1.  Servicesâ€‘shims verwijderen
2.  Oude utils-map verwijderen
3.  Oude shared-types-map verwijderen
4.  Oude selectors-map verwijderen
5.  Oude state-map verwijderen

***

# ðŸ **Volgorde Samengevat (Kern)**

    1. DOMAIN
       1. types
       2. schemas
       3. helpers

    2. INFRASTRUCTURE
       1. logging
       2. audit
       3. telemetry
       4. storage

    3. APPLICATION
       1. grote services
       2. legacy selectors

    4. UI
       1. grote screens
       2. hooks
       3. styles

    5. KERNEL (validatie)

    6. CLEANUP

***

# ðŸš€ Wat is de optimale volgende stap *nu*?

Je hebt al:

*   gap-analyse âœ”ï¸
*   grote bestanden-inventaris âœ”ï¸
*   migratiestructuur âœ”ï¸
*   gewenste mappenstructuur âœ”ï¸
*   prioriteitenlijst âœ”ï¸

Daarmee is de **volgende concrete stap**:

> **Maak een migratieboard waarin elke map (/services, /utils, /state, /selectors, /styles, /hooks, /screens) Ã©Ã©n epic is, en elk groot bestand een ticket.**

Als je wilt, maak ik:

### ðŸ‘‰ **Automatisch gegenereerd GitHub Project Board (CSV of JSON)**

### ðŸ‘‰ **Jira-import**

### ðŸ‘‰ **Of een commit-sjabloon + map-herstructureringsscript (Node/TS)**

Wat wil je als eerst?
