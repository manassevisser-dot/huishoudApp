# .husky/pre-commit
#!/usr/bin/env bash
set -euo pipefail

echo "ğŸ¦… Phoenix Gate A - Pre-commit Quality Check"
echo ""

# === GATE A: PHOENIX ===
if node scripts/phoenix/quinn-adapter.js; then
    echo ""
    echo "âœ… Gate A: GO - All Phoenix checks passed"
    echo ""
else
    echo ""
    echo "âŒ Gate A: STOP - Fix violations before commit"
    echo ""
    echo "Quick fixes:"
    echo "  - npm run sync:aliases        (alias consistency)"
    echo "  - npm run lint -- --fix       (ESLint errors)"
    echo "  - Remove HTML tags             (use <View>/<Text>)"
    echo ""
    exit 1
fi

# Optioneel: CleanCode check (non-blocking)
echo "ğŸ“Š Running CleanCode checklist..."
node scripts/maintenance/cleancode-automator.js || true

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… Pre-commit checks passed!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
