{
  "Producing_Role": "CEO Manasse",
  "Artifact_ID": "SVZ-0-undo_screen-001-GEN4",
  "Status": "PENDING",
  "Token_ID": "TOKEN-ID-MANASSE-SVZ0-F791DE2C",
  "Runtime_Environment": "NODE_TERMINAL",
  "SHA256_Hash": "f791de2c5391992ded854e3228270acc0ef7674e3d468c58ed88c252c7454675",
  "Source_Commit": "MANUAL_CLI_INPUT",
  "PII_Attestation": "NEE - CLEAN",
  "File_Name": "UndoScreen.tsx",
  "Raw_Content": "import React, { useState } from 'react';\n// Verander tijdelijk de import naar een relatief pad als de alias faalt\n// import { transactionService } from '../../services/transactionService'; \nimport {StatefulTransactionAdapter} from '@adapters/transaction/stateful'\ninterface UndoScreenProps {\n  initialData: any; // Tijdelijke expliciete any om TS7031 te sussen\n}\nimport { ZodError } from 'zod';\n\nexport const UndoScreen: React.FC<UndoScreenProps> = ({ initialData }) => {\n  // ADR-03: Adapter bewaart de staat, UI projecteert alleen de 'currentView'\n  const [adapter] = useState(() => new StatefulTransactionAdapter(initialData));\n  const [currentView, setCurrentView] = useState(adapter.getCurrentState());\n  const [uiError, setUiError] = useState<string | null>(null);\n\n  const handleUpdate = (inputValue: number, parts: number) => {\n    setUiError(null);\n    try {\n      // ADR-05: Berekening wordt gedelegeerd, ZodError wordt gegooid bij floats\n      const distribution = adapter.calculateDistribution(inputValue, parts);\n      \n      const newState = { ...currentView, distribution, lastUpdated: new Date().toISOString() };\n      adapter.push(newState, 'USER_UPDATE');\n      \n      setCurrentView(adapter.getCurrentState());\n    } catch (error) {\n      if (error instanceof ZodError) {\n        setUiError(\"Input violation: Integers only (ADR-05)\");\n      } else {\n        setUiError(\"An unexpected error occurred\");\n      }\n    }\n  };\n\n  const handleUndo = () => {\n    const prevState = adapter.undo();\n    if (prevState) setCurrentView(prevState);\n  };\n\n  const handleRedo = () => {\n    const nextState = adapter.redo();\n    if (nextState) setCurrentView(nextState);\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold\">Transaction Undo/Redo</h1>\n      {uiError && <div className=\"text-red-500 mb-2\">{uiError}</div>}\n      \n      <div className=\"mt-4 space-y-2\">\n        <pre className=\"bg-gray-100 p-2 rounded\">\n          {JSON.stringify(currentView, null, 2)}\n        </pre>\n        \n        <div className=\"flex space-x-2\">\n          <button onClick={handleUndo} className=\"px-4 py-2 bg-blue-500 text-white rounded\">Undo</button>\n          <button onClick={handleRedo} className=\"px-4 py-2 bg-blue-500 text-white rounded\">Redo</button>\n        </div>\n\n        {/* Simulatie van invoer voor testdoeleinden */}\n        <button \n          onClick={() => handleUpdate(100.5, 2)} \n          className=\"block mt-4 text-xs text-gray-400\"\n        >\n          Test Float Violation (100.5)\n        </button>\n      </div>\n    </div>\n  );\n};\n"
}